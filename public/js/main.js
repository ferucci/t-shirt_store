!function(){"use strict";class t{constructor(t){this.links=t,this.init()}init(){this.links.forEach((t=>t.addEventListener("click",this.handleLinkClick.bind(this))))}handleLinkClick(t){t.preventDefault();const e=t.target,s=e.parentElement.getAttribute("data-dropdown");let i=document.getElementById(s);i&&(e.closest(".active")||this.checkActiveLinks(),e.classList.toggle("active"),i.classList.toggle("show"))}checkActiveLinks(){document.querySelectorAll(".nav__link.active").forEach((t=>{t.classList.remove("active"),t.parentElement.querySelector(".dropdown__list").classList.remove("show")}))}}class e{constructor(t){this.burgerBtn=t,this.headerMenu=document.querySelector(".header__menu"),this.init()}init(){this.burgerBtn.addEventListener("click",this.toggleBurgerMenu.bind(this))}toggleBurgerMenu(){this.headerMenu.classList.toggle("active-menu")}}const s={menuLinks:document.querySelectorAll(".nav__item[data-dropdown] > .nav__link"),burgerBtn:document.querySelector(".header__btn-menu")};class i{constructor(t){this.options=Object.assign({isOpen:()=>{},isClose:()=>{}},t),this.modal=document.querySelector(".popup"),this.speed=!1,this.animation=!1,this._reOpen=!1,this._nextContainer=!1,this.isOpen=!1,this.modalContainer=!1,this.previousActiveElement=!1,this.fixBlocks=document.querySelectorAll(".fix-block"),this.focusElements=["a[href]","input","button","select","textarea","iframe","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.open=this.open.bind(this),this.close=this.close.bind(this),this.focusCatch=this.focusCatch.bind(this),this.focusTrap=this.focusTrap.bind(this),this.disableScroll=this.disableScroll.bind(this),this.enableScroll=this.enableScroll.bind(this),this.lockPadding=this.lockPadding.bind(this),this.unlockPadding=this.unlockPadding.bind(this),this.events()}events(){this.modal&&(document.addEventListener("click",(t=>{const e=t.target.closest("[data-path");if(e){let t=e.dataset.path,s=e.dataset.animation,i=e.dataset.speed;return this.animation=s||"fade",this.speed=i?parseInt(i):300,this._nextContainer=document.querySelector(`[data-target="${t}"]`),void this.open()}(t.target.closest(".popup__close-item")||t.target.closest(".delete__button"))&&this.close()})),window.addEventListener("keydown",(t=>{27==t.keyCode&&this.isOpen&&this.close(),9==t.keyCode&&this.isOpen&&this.focusCatch(t)})),window.addEventListener("click",(t=>{t.target.classList.contains("popup__wrapp")||t.target.closest(".popup__wrapp")||!this.isOpen||this.close()})))}open(t){if(this.previousActiveElement=document.activeElement,this.isOpen)return this.reOpen=!0,void this.close();this.modalContainer=this._nextContainer,t&&(this.modalContainer=document.querySelector(`[data-target="${t}"]`)),this.modalContainer.scrollTo(0,0),this.modal.style.setProperty("$transition-time",this.speed/1e3+"s"),this.modal.classList.add("is-open"),document.body.style.scrollBehavior="auto",document.documentElement.style.scrollBehavior="auto",this.disableScroll(),this.modalContainer.classList.add("popup-open"),this.modalContainer.classList.add(this.animation),setTimeout((()=>{this.modalContainer.classList.add("animate-open"),this.options.isOpen(this),this.isOpen=!0,this.focusTrap()}),this.speed)}close(){this.modalContainer&&(this.modalContainer.classList.remove("animate-open"),this.modalContainer.classList.remove(this.animation),this.modal.classList.remove("is-open"),this.modalContainer.classList.remove("popup-open"),this.enableScroll(),document.body.style.scrollBehavior="auto",document.documentElement.style.scrollBehavior="auto",this.options.isClose(this),this.isOpen=!1,this.focusTrap(),this.reOpen&&(this.reOpen=!1,this.open()))}focusCatch(t){const e=this.modalContainer.querySelectorAll(this.focusElements),s=Array.prototype.slice.call(e),i=s.indexOf(document.activeElement);t.shiftKey&&0===i&&(s[s.length-1].focus(),t.preventDefault()),t.shiftKey||i!==s.length-1||(s[0].focus(),t.preventDefault())}focusTrap(){const t=this.modalContainer.querySelectorAll(this.focusElements);this.isOpen?t&&t[t.length-1].focus():this.previousActiveElement.focus()}disableScroll(){let t=window.scrollY;this.lockPadding(),document.body.classList.add("disable-scroll"),document.body.dataset.position=t,document.body.style.top=-t+"px"}enableScroll(){let t=parseInt(document.body.dataset.position,10);this.unlockPadding(),document.body.style.top="auto",document.body.classList.remove("disable-scroll"),window.scrollTo({top:t,left:0}),document.body.removeAttribute("data-position")}lockPadding(){let t=window.innerWidth-document.body.offsetWidth+"px";this.fixBlocks.forEach((e=>{e.style.paddingRight=t})),document.body.style.paddingRight=t}unlockPadding(){this.fixBlocks.forEach((t=>{t.style.paddingRight="0px"})),document.body.style.paddingRight="0px"}}window.addEventListener("DOMContentLoaded",(()=>{const{menuLinks:o,burgerBtn:n}=s;new t(o),new e(n),new i({isOpen:t=>{},isClose:t=>{}})}))}();